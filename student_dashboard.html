<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Dashboard - KCET ECE</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=DM+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --primary: #1a237e;
  --primary-light: #3949ab;
  --primary-dark: #0d1642;
  --accent: #00bfa5;
  --accent-dark: #00897b;
  --accent-light: #1de9b6;
  --success: #00c853;
  --warning: #ffa000;
  --danger: #d32f2f;
  --text-dark: #1a1a2e;
  --text-medium: #4a5568;
  --text-light: #718096;
  --bg-main: #f8fafc;
  --bg-card: #ffffff;
  --border: #e2e8f0;
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.12);
  --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.16);
  --glow-accent: 0 0 40px rgba(0, 191, 165, 0.3);
  --glow-primary: 0 0 40px rgba(26, 35, 126, 0.3);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  background: linear-gradient(135deg, #f8fafc 0%, #e8f0f8 100%);
  color: var(--text-dark);
  line-height: 1.6;
  overflow-x: hidden;
  position: relative;
}

/* ========== ANIMATED BACKGROUND ========== */
.bg-decoration {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  pointer-events: none;
  overflow: hidden;
}

.bg-decoration::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -10%;
  width: 1000px;
  height: 1000px;
  background: radial-gradient(circle, rgba(26, 35, 126, 0.12) 0%, rgba(57, 73, 171, 0.06) 40%, transparent 70%);
  border-radius: 50%;
  animation: floatComplex 25s ease-in-out infinite;
  filter: blur(60px);
}

.bg-decoration::after {
  content: '';
  position: absolute;
  bottom: -40%;
  left: -15%;
  width: 800px;
  height: 800px;
  background: radial-gradient(circle, rgba(0, 191, 165, 0.1) 0%, rgba(29, 233, 182, 0.05) 40%, transparent 70%);
  border-radius: 50%;
  animation: floatComplex 30s ease-in-out infinite reverse;
  filter: blur(60px);
}

@keyframes floatComplex {
  0%, 100% { transform: translate(0, 0) rotate(0deg) scale(1); }
  25% { transform: translate(40px, -50px) rotate(90deg) scale(1.1); }
  50% { transform: translate(-30px, 30px) rotate(180deg) scale(0.9); }
  75% { transform: translate(50px, 40px) rotate(270deg) scale(1.05); }
}

/* ========== PARTICLES ========== */
.particles {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  pointer-events: none;
}

.particle {
  position: absolute;
  background: linear-gradient(135deg, var(--accent), var(--primary-light));
  border-radius: 50%;
  opacity: 0.15;
  animation: particleFloat 15s linear infinite;
}

@keyframes particleFloat {
  0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
  10% { opacity: 0.15; }
  90% { opacity: 0.15; }
  100% { transform: translateY(-100px) rotate(720deg); opacity: 0; }
}

/* ========== HEADER — DESKTOP ========== */
header {
  background: rgba(26, 35, 126, 0.85);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  color: #fff;
  padding: 0;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15), inset 0 -1px 0 rgba(255, 255, 255, 0.1);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  animation: slideDownGlass 0.8s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes slideDownGlass {
  from { opacity: 0; transform: translateY(-100%); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ── Desktop layout ── */
.header-content {
  max-width: 1400px;
  margin: 0 auto;
  padding: 28px 40px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 24px;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 20px;
}

.header-icon {
  width: 64px;
  height: 64px;
  background: rgba(255, 255, 255, 0.12);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.15);
  flex-shrink: 0;
  animation: iconFloat 3s ease-in-out infinite;
}

@keyframes iconFloat {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  50%       { transform: translateY(-6px) rotate(3deg); }
}

.header-title {
  display: flex;
  flex-direction: column;
}

.header-title h1 {
  font-family: 'Space Grotesk', serif;
  font-size: 32px;
  font-weight: 700;
  margin: 0;
  letter-spacing: -0.8px;
  background: linear-gradient(135deg, #ffffff 0%, rgba(255,255,255,0.8) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.header-title p {
  font-size: 15px;
  opacity: 0.85;
  margin: 2px 0 0 0;
  font-weight: 500;
  letter-spacing: 0.3px;
}

.header-time {
  font-size: 14px;
  opacity: 0.9;
  text-align: right;
  font-weight: 500;
  padding: 12px 20px;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.15);
  letter-spacing: 0.3px;
  white-space: nowrap;
}

/* ========== MOBILE HEADER OVERRIDES ========== */
@media (max-width: 768px) {
  .header-content {
    padding: 0;          /* remove outer padding; inner elements control spacing */
    flex-direction: column;
    gap: 0;
    align-items: stretch;
  }

  /* Row 1: icon + title side-by-side */
  .header-left {
    flex-direction: row;
    align-items: center;
    gap: 14px;
    padding: 14px 18px 10px;
  }

  /* Smaller icon on mobile */
  .header-icon {
    width: 40px;
    height: 40px;
    font-size: 20px;
    border-radius: 12px;
    flex-shrink: 0;
  }

  .header-title h1 {
    font-size: 18px;
    letter-spacing: -0.4px;
    line-height: 1.2;
  }

  .header-title p {
    font-size: 12px;
    opacity: 0.75;
    margin-top: 2px;
  }

  /* Row 2: date/time as a slim full-width bar */
  .header-time {
    text-align: center;
    border-radius: 0;
    border: none;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding: 8px 18px;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.4px;
    background: rgba(0, 0, 0, 0.15);
    white-space: normal;
    line-height: 1.4;
  }
}

/* ========== CONTAINER ========== */
.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 48px 40px;
  position: relative;
  z-index: 1;
}

/* ========== PROFILE CARD ========== */
.profile {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 28px;
  padding: 44px 48px;
  display: flex;
  align-items: center;
  gap: 36px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12), 0 0 1px rgba(0, 0, 0, 0.05);
  margin-bottom: 56px;
  border: 1px solid rgba(255, 255, 255, 0.9);
  position: relative;
  overflow: hidden;
  animation: profileSlide 1s cubic-bezier(0.16, 1, 0.3, 1) 0.2s backwards;
}

@keyframes profileSlide {
  from { opacity: 0; transform: translateY(50px) scale(0.95); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

.profile::before {
  content: '';
  position: absolute;
  top: -50%; right: -10%;
  width: 400px; height: 400px;
  background: radial-gradient(circle, rgba(0,191,165,0.15) 0%, transparent 70%);
  border-radius: 50%;
  animation: profilePulse 6s ease-in-out infinite;
  filter: blur(40px);
}

@keyframes profilePulse {
  0%,100% { transform: scale(1) translate(0,0); opacity: 0.5; }
  50%      { transform: scale(1.2) translate(-20px,20px); opacity: 0.3; }
}

.profile::after {
  content: '';
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 4px;
  background: linear-gradient(90deg, var(--accent), var(--primary-light), var(--accent));
  background-size: 200% 100%;
  animation: shimmer 3s linear infinite;
}

@keyframes shimmer {
  0%   { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.profile-avatar {
  width: 120px; height: 120px;
  background: linear-gradient(135deg, var(--primary), var(--primary-light));
  border-radius: 28px;
  display: flex; align-items: center; justify-content: center;
  font-size: 56px; color: #fff;
  box-shadow: 0 12px 40px rgba(26,35,126,0.3), inset 0 1px 0 rgba(255,255,255,0.2);
  flex-shrink: 0;
  position: relative; z-index: 1;
  border: 3px solid rgba(255,255,255,0.2);
  animation: avatarEntrance 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.5s backwards;
}

@keyframes avatarEntrance {
  0%   { transform: scale(0) rotate(-180deg); opacity: 0; filter: blur(10px); }
  100% { transform: scale(1) rotate(0); opacity: 1; filter: blur(0); }
}

.profile-info { flex: 1; position: relative; z-index: 1; }

.profile-info h2 {
  font-family: 'Space Grotesk', serif;
  font-size: 38px; font-weight: 700;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  margin: 0 0 12px 0; letter-spacing: -1px; line-height: 1.2;
}

.profile-details {
  display: flex; flex-wrap: wrap; gap: 28px; margin-top: 16px;
}

.profile-detail {
  display: flex; align-items: center; gap: 10px;
  font-size: 16px; color: var(--text-medium); font-weight: 600;
  padding: 10px 18px;
  background: rgba(0,191,165,0.08);
  border-radius: 12px; border: 1px solid rgba(0,191,165,0.15);
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.profile-detail:hover {
  background: rgba(0,191,165,0.12);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,191,165,0.2);
}

.profile-detail i { color: var(--accent); font-size: 18px; }

/* ========== SECTION ========== */
.section {
  margin-bottom: 64px;
  animation: sectionFade 0.8s ease backwards;
}

.section:nth-child(2) { animation-delay: 0.3s; }
.section:nth-child(3) { animation-delay: 0.5s; }
.section:nth-child(4) { animation-delay: 0.7s; }

@keyframes sectionFade {
  from { opacity: 0; transform: translateY(30px); filter: blur(10px); }
  to   { opacity: 1; transform: translateY(0); filter: blur(0); }
}

.section-header {
  display: flex; align-items: center; gap: 16px;
  margin-bottom: 32px; position: relative; padding-left: 28px;
}

.section-header::before {
  content: '';
  position: absolute; left: 0; top: 50%; transform: translateY(-50%);
  width: 5px; height: 48px;
  background: linear-gradient(180deg, var(--accent), var(--accent-dark));
  border-radius: 3px; box-shadow: 0 0 20px var(--accent);
  animation: barGrow 0.8s cubic-bezier(0.34,1.56,0.64,1);
}

@keyframes barGrow {
  from { height: 0; opacity: 0; }
  to   { height: 48px; opacity: 1; }
}

.section-header i {
  font-size: 32px;
  background: linear-gradient(135deg, var(--accent), var(--accent-light));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  animation: iconPop 0.6s cubic-bezier(0.34,1.56,0.64,1);
  filter: drop-shadow(0 2px 4px rgba(0,191,165,0.3));
}

@keyframes iconPop {
  from { transform: rotate(-180deg) scale(0); }
  to   { transform: rotate(0) scale(1); }
}

.section-header h3 {
  font-family: 'Space Grotesk', serif;
  font-size: 30px; font-weight: 700;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  margin: 0; letter-spacing: -0.8px;
}

/* ========== EXAM GRID ========== */
.exam-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
  gap: 32px;
}

/* ========== EXAM CARD ========== */
.exam-card {
  background: rgba(255,255,255,0.95);
  backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
  border-radius: 24px; padding: 36px 32px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.08);
  position: relative;
  border: 1px solid rgba(255,255,255,0.8);
  transition: all 0.5s cubic-bezier(0.34,1.56,0.64,1);
  animation: cardEntrance 0.6s cubic-bezier(0.16,1,0.3,1) backwards;
  overflow: hidden;
}

.exam-card::before {
  content: '';
  position: absolute; top: 0; left: 0; width: 100%; height: 5px;
  background: linear-gradient(90deg, var(--accent), var(--primary-light));
  transform: scaleX(0); transform-origin: left;
  transition: transform 0.5s cubic-bezier(0.34,1.56,0.64,1);
}

.exam-card::after {
  content: '';
  position: absolute; inset: 0;
  background: radial-gradient(circle at top right, rgba(0,191,165,0.08) 0%, transparent 60%);
  opacity: 0; transition: opacity 0.5s ease; pointer-events: none;
}

.exam-card:hover::before { transform: scaleX(1); }
.exam-card:hover::after  { opacity: 1; }

.exam-card:nth-child(1) { animation-delay: 0.1s; }
.exam-card:nth-child(2) { animation-delay: 0.2s; }
.exam-card:nth-child(3) { animation-delay: 0.3s; }
.exam-card:nth-child(4) { animation-delay: 0.4s; }
.exam-card:nth-child(5) { animation-delay: 0.5s; }

@keyframes cardEntrance {
  from { opacity: 0; transform: translateY(40px) scale(0.9) rotateX(10deg); filter: blur(10px); }
  to   { opacity: 1; transform: translateY(0) scale(1) rotateX(0); filter: blur(0); }
}

.exam-card:hover {
  transform: translateY(-12px) scale(1.02);
  box-shadow: 0 24px 64px rgba(0,0,0,0.15), 0 0 0 1px var(--accent);
  border-color: var(--accent);
}

/* ========== STATUS BADGE ========== */
.status-badge {
  position: absolute; top: 24px; right: 24px;
  padding: 10px 20px;
  font-size: 12px; font-weight: 700; letter-spacing: 1px;
  color: #fff; border-radius: 24px; text-transform: uppercase;
  box-shadow: 0 4px 16px rgba(0,0,0,0.2);
  backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);
  animation: badgeEntrance 0.5s cubic-bezier(0.34,1.56,0.64,1) 0.4s backwards;
  z-index: 2;
}

@keyframes badgeEntrance {
  from { transform: scale(0) rotate(-180deg); opacity: 0; }
  to   { transform: scale(1) rotate(0); opacity: 1; }
}

.status-live {
  background: linear-gradient(135deg, #00c853, #00897b);
  animation: badgePulseGlow 2s ease-in-out infinite;
}

@keyframes badgePulseGlow {
  0%,100% { box-shadow: 0 0 0 0 rgba(0,200,83,0.7), 0 4px 16px rgba(0,200,83,0.4); }
  50%      { box-shadow: 0 0 0 12px rgba(0,200,83,0), 0 4px 16px rgba(0,200,83,0.6); }
}

.status-upcoming  { background: linear-gradient(135deg, #ffa000, #f57c00); }
.status-completed { background: linear-gradient(135deg, #546e7a, #455a64); }

/* ========== EXAM INFO ========== */
.exam-info { position: relative; z-index: 1; }

.exam-info h4 {
  font-family: 'Space Grotesk', serif;
  font-size: 24px; font-weight: 700;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  margin: 0 0 14px 0; line-height: 1.3; letter-spacing: -0.5px;
  padding-right: 120px;
}

.exam-id   { font-size: 13px; color: var(--text-light); font-weight: 600; margin-bottom: 10px; letter-spacing: 0.5px; text-transform: uppercase; }
.exam-time { font-size: 15px; color: var(--text-medium); margin-bottom: 24px; display: flex; align-items: center; gap: 10px; font-weight: 600; }
.exam-time i { color: var(--accent); font-size: 16px; }

/* ========== META BOX ========== */
.meta-box {
  background: linear-gradient(135deg, rgba(0,191,165,0.06), rgba(26,35,126,0.06));
  backdrop-filter: blur(10px); border-radius: 20px; padding: 24px;
  margin: 24px 0; border: 1px solid rgba(0,191,165,0.15);
  position: relative; overflow: hidden;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.5);
}

.meta-box::before {
  content: '';
  position: absolute; top: 0; left: 0;
  width: 5px; height: 100%;
  background: linear-gradient(180deg, var(--accent), var(--primary-light));
  box-shadow: 0 0 10px var(--accent);
}

.meta-box::after {
  content: '';
  position: absolute; top: 0; right: 0;
  width: 100px; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(0,191,165,0.1));
  pointer-events: none;
}

.meta-row {
  display: flex; align-items: center; justify-content: space-between;
  margin: 12px 0; font-size: 15px; color: var(--text-medium); font-weight: 600;
  position: relative; z-index: 1;
}

.meta-row i { margin-right: 10px; color: var(--accent); font-size: 16px; }

.meta-total {
  margin-top: 20px; padding-top: 20px;
  border-top: 2px dashed rgba(0,191,165,0.25);
  display: flex; align-items: center; justify-content: space-between;
  font-size: 20px; font-weight: 800;
  background: linear-gradient(135deg, var(--success) 0%, var(--accent-dark) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}

.meta-total i {
  font-size: 22px;
  background: linear-gradient(135deg, var(--success) 0%, var(--accent-dark) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  animation: starSpin 4s linear infinite;
  filter: drop-shadow(0 2px 4px rgba(0,200,83,0.3));
}

@keyframes starSpin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

/* ========== BUTTONS ========== */
.btn {
  width: 100%; padding: 18px 28px;
  border: none; border-radius: 16px;
  font-size: 16px; font-weight: 700;
  cursor: pointer; color: #fff;
  display: flex; align-items: center; justify-content: center; gap: 12px;
  margin-top: 20px;
  transition: all 0.4s cubic-bezier(0.34,1.56,0.64,1);
  position: relative; overflow: hidden;
  box-shadow: 0 8px 24px rgba(0,0,0,0.15); letter-spacing: 0.3px;
}

.btn::before {
  content: '';
  position: absolute; top: 50%; left: 50%;
  width: 0; height: 0; border-radius: 50%;
  background: rgba(255,255,255,0.25);
  transform: translate(-50%,-50%);
  transition: width 0.6s ease, height 0.6s ease;
}

.btn:hover::before { width: 400px; height: 400px; }

.btn i   { font-size: 20px; position: relative; z-index: 1; transition: transform 0.3s ease; }
.btn:hover i { transform: scale(1.2) rotate(5deg); }
.btn span { position: relative; z-index: 1; }

.btn-start  { background: linear-gradient(135deg, var(--success), #00897b); border: 1px solid rgba(255,255,255,0.2); }
.btn-start:hover  { transform: translateY(-4px) scale(1.02); box-shadow: 0 16px 40px rgba(0,200,83,0.4); }

.btn-review { background: linear-gradient(135deg, var(--primary), var(--primary-light)); border: 1px solid rgba(255,255,255,0.2); }
.btn-review:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 16px 40px rgba(26,35,126,0.4); }

.btn-logout {
  background: linear-gradient(135deg, var(--danger), #c62828);
  margin-top: 48px; max-width: 320px;
  margin-left: auto; margin-right: auto;
  border: 1px solid rgba(255,255,255,0.2);
}

.btn-logout:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 16px 40px rgba(211,47,47,0.4); }

/* ========== EMPTY STATE ========== */
.empty {
  background: rgba(255,255,255,0.6); backdrop-filter: blur(10px);
  padding: 56px 36px; border-radius: 24px;
  text-align: center; color: var(--text-light);
  box-shadow: 0 4px 16px rgba(0,0,0,0.06);
  border: 2px dashed rgba(0,191,165,0.2);
  animation: emptyPulse 0.8s ease;
}

@keyframes emptyPulse {
  from { opacity: 0; transform: scale(0.9); }
  to   { opacity: 1; transform: scale(1); }
}

.empty i {
  font-size: 56px; margin-bottom: 20px; opacity: 0.4; display: block;
  background: linear-gradient(135deg, var(--accent), var(--primary-light));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}

.empty p { font-size: 17px; font-weight: 600; margin: 0; color: var(--text-medium); }

/* ========== FOOTER ========== */
.footer {
  text-align: center; padding: 40px 20px;
  font-size: 15px; color: var(--text-light);
  margin-top: 64px; border-top: 1px solid var(--border);
  animation: fadeIn 1s ease 1s backwards; position: relative;
}

.footer::before {
  content: '';
  position: absolute; top: 0; left: 50%; transform: translateX(-50%);
  width: 200px; height: 1px;
  background: linear-gradient(90deg, transparent, var(--accent), transparent);
}

.footer p { margin: 0; font-weight: 600; }

/* ========== SPINNER ========== */
.loading-spinner {
  display: inline-block; width: 48px; height: 48px;
  border: 4px solid rgba(0,191,165,0.15); border-top: 4px solid var(--accent);
  border-radius: 50%; animation: spin 0.8s linear infinite;
  margin: 20px auto; box-shadow: 0 0 20px rgba(0,191,165,0.3);
}

@keyframes spin { to { transform: rotate(360deg); } }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ========== RESPONSIVE — TABLET & BELOW ========== */
@media (max-width: 768px) {
  .container { padding: 24px 16px; }

  .profile {
    flex-direction: column; text-align: center;
    padding: 28px 20px; gap: 20px;
  }

  .profile-avatar { width: 90px; height: 90px; font-size: 42px; border-radius: 22px; }

  .profile-info h2 { font-size: 26px; }

  .profile-details { justify-content: center; gap: 12px; }

  .profile-detail { font-size: 14px; padding: 8px 14px; gap: 8px; }
  .profile-detail i { font-size: 15px; }

  .exam-grid { grid-template-columns: 1fr; gap: 20px; }

  .section-header h3 { font-size: 22px; }
  .section-header i  { font-size: 26px; }

  .section { margin-bottom: 40px; }

  .exam-info h4 { padding-right: 100px; font-size: 19px; }

  .meta-box { padding: 18px; }

  .meta-row { font-size: 14px; }

  .meta-total { font-size: 17px; }

  .btn { padding: 15px 20px; font-size: 15px; }

  .status-badge { top: 18px; right: 18px; padding: 7px 14px; font-size: 11px; }

  .btn-logout { max-width: 100%; margin-top: 36px; }
}

/* ========== RESPONSIVE — SMALL PHONES ========== */
@media (max-width: 480px) {
  .exam-card { padding: 24px 18px; }
  .exam-info h4 { font-size: 17px; padding-right: 90px; }
  .btn { padding: 14px 18px; font-size: 14px; border-radius: 12px; }
  .status-badge { font-size: 10px; padding: 6px 12px; top: 16px; right: 16px; }
}
</style>
</head>

<body>

<div class="bg-decoration"></div>
<div class="particles" id="particles"></div>

<!-- ===== HEADER ===== -->
<header>
  <div class="header-content">
    <div class="header-left">
      <div class="header-icon">
        <i class="fa-solid fa-user-graduate"></i>
      </div>
      <div class="header-title">
        <h1>Student Portal</h1>
        <p>KCET – Department of ECE</p>
      </div>
    </div>
    <div class="header-time" id="currentTime"></div>
  </div>
</header>

<div class="container">

  <!-- Profile Card -->
  <div class="profile" id="profile"></div>

  <!-- Live Exams -->
  <div class="section">
    <div class="section-header">
      <i class="fa-solid fa-bolt"></i>
      <h3>Live Examinations</h3>
    </div>
    <div id="live" class="exam-grid">
      <div class="empty">
        <i class="fa-solid fa-spinner fa-spin"></i>
        <p>Loading examinations...</p>
      </div>
    </div>
  </div>

  <!-- Scheduled Exams -->
  <div class="section">
    <div class="section-header">
      <i class="fa-solid fa-calendar-days"></i>
      <h3>Scheduled Examinations</h3>
    </div>
    <div id="upcoming" class="exam-grid">
      <div class="empty">
        <i class="fa-solid fa-spinner fa-spin"></i>
        <p>Loading examinations...</p>
      </div>
    </div>
  </div>

  <!-- Completed Exams -->
  <div class="section">
    <div class="section-header">
      <i class="fa-solid fa-circle-check"></i>
      <h3>Completed Examinations</h3>
    </div>
    <div id="completed" class="exam-grid">
      <div class="empty">
        <i class="fa-solid fa-spinner fa-spin"></i>
        <p>Loading examinations...</p>
      </div>
    </div>
  </div>

  <!-- Logout -->
  <button class="btn btn-logout" onclick="logout()">
    <i class="fa-solid fa-right-from-bracket"></i>
    <span>Logout</span>
  </button>

  <div class="footer">
    <p>© 2026 KCET – Department of Electronics and Communication Engineering</p>
  </div>
</div>

<script>
const WEBAPP_URL =
"https://script.google.com/macros/s/AKfycbzQAZuTBNRUdr86h0xC3C_KSj5M7-AC4ObFlMeGov_j9na-iOnmaCFMJqrauw1ad0Ra/exec";

/* ===== PARTICLES ===== */
function createParticles() {
  const container = document.getElementById('particles');
  for (let i = 0; i < 15; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    const size = Math.random() * 4 + 2;
    p.style.cssText = `width:${size}px;height:${size}px;left:${Math.random()*100}%;animation-delay:${Math.random()*15}s;animation-duration:${15+Math.random()*10}s`;
    container.appendChild(p);
  }
}
createParticles();

/* ===== CLOCK ===== */
function updateTime() {
  const now = new Date();
  const isMobile = window.innerWidth <= 768;

  if (isMobile) {
    // Compact two-line format for mobile
    const datePart = now.toLocaleDateString('en-US', { weekday:'short', month:'short', day:'numeric', year:'numeric' });
    const timePart = now.toLocaleTimeString('en-US', { hour:'2-digit', minute:'2-digit' });
    document.getElementById('currentTime').textContent = `${datePart}  •  ${timePart}`;
  } else {
    const options = { weekday:'long', year:'numeric', month:'long', day:'numeric', hour:'2-digit', minute:'2-digit' };
    document.getElementById('currentTime').textContent = now.toLocaleDateString('en-US', options);
  }
}
updateTime();
setInterval(updateTime, 60000);
window.addEventListener('resize', updateTime);

/* ===== SESSION CHECK ===== */
const userRaw = sessionStorage.getItem("user");
if (!userRaw) {
  alert("Session expired. Please login again.");
  location.href = "index.html";
}
const user = JSON.parse(userRaw || '{"name":"Demo Student","roll":"20ECE001","dept":"ECE","year":"3rd Year","section":"A"}');

/* ===== PROFILE ===== */
document.getElementById('profile').innerHTML = `
<div class="profile-avatar">
  <i class="fa-solid fa-user-graduate"></i>
</div>
<div class="profile-info">
  <h2>${user.name}</h2>
  <div class="profile-details">
    <div class="profile-detail"><i class="fa-solid fa-id-card"></i><span>${user.roll}</span></div>
    <div class="profile-detail"><i class="fa-solid fa-building-columns"></i><span>${user.dept}</span></div>
    <div class="profile-detail"><i class="fa-solid fa-graduation-cap"></i><span>${user.year} – ${user.section}</span></div>
  </div>
</div>`;

/* ===== FETCH DATA ===== */
Promise.all([
  fetch(WEBAPP_URL, { method:"POST", body: new URLSearchParams({action:"getStudentExams", roll:user.roll}) }).then(r=>r.json()),
  fetch(WEBAPP_URL, { method:"POST", body: new URLSearchParams({action:"getResults"}) }).then(r=>r.json())
])
.then(([exams, results]) => {
  const live = document.getElementById('live');
  const upcoming = document.getElementById('upcoming');
  const completed = document.getElementById('completed');
  live.innerHTML = upcoming.innerHTML = completed.innerHTML = "";

  exams.forEach(e => {
    const a = +e[2], b = +e[3], t = a + b * 2;
    const attempts = results.filter(r => r[0] === e[0] && r[1] === user.roll);
    const last = attempts.length ? attempts[attempts.length-1][4] : null;
    const now = new Date(), start = new Date(e[8]), end = new Date(e[9]);

    if (last === "SUBMITTED")   { completed.innerHTML += completedCard(e, "COMPLETED", a, b, t); return; }
    if (last === "RE-ENABLED")  { live.innerHTML += liveCard(e, a, b, t); return; }
    if (!attempts.length && now >= start && now <= end) { live.innerHTML += liveCard(e, a, b, t); return; }
    if (now < start)            { upcoming.innerHTML += upcomingCard(e, start, a, b, t); return; }
    completed.innerHTML += completedCard(e, "CLOSED", a, b, t);
  });

  if (!live.innerHTML)      live.innerHTML      = '<div class="empty"><i class="fa-solid fa-calendar-xmark"></i><p>No live examinations at the moment</p></div>';
  if (!upcoming.innerHTML)  upcoming.innerHTML  = '<div class="empty"><i class="fa-solid fa-clock"></i><p>No scheduled examinations</p></div>';
  if (!completed.innerHTML) completed.innerHTML = '<div class="empty"><i class="fa-solid fa-inbox"></i><p>No completed examinations</p></div>';
})
.catch(() => {
  ['live','upcoming','completed'].forEach(id => {
    document.getElementById(id).innerHTML = '<div class="empty"><i class="fa-solid fa-exclamation-triangle"></i><p>Unable to load examinations. Please refresh.</p></div>';
  });
});

/* ===== CARD BUILDERS ===== */
const metaBox = (a, b, t) => `
<div class="meta-box">
  <div class="meta-row"><span><i class="fa-solid fa-list-check"></i>Part A (1 Mark)</span><strong>${a} Qs</strong></div>
  <div class="meta-row"><span><i class="fa-solid fa-layer-group"></i>Part B (2 Marks)</span><strong>${b} Qs</strong></div>
  <div class="meta-total"><span><i class="fa-solid fa-star"></i>Total Marks</span><strong>${t}</strong></div>
</div>`;

const liveCard = (e, a, b, t) => `
<div class="exam-card">
  <div class="status-badge status-live">● Live</div>
  <div class="exam-info">
    <h4>${e[1]}</h4>
    <p class="exam-id">Exam ID: ${e[0]}</p>
    ${metaBox(a,b,t)}
    <button class="btn btn-start" onclick="startExam('${e[0]}')">
      <i class="fa-solid fa-play"></i><span>Start Examination</span>
    </button>
  </div>
</div>`;

const upcomingCard = (e, s, a, b, t) => `
<div class="exam-card">
  <div class="status-badge status-upcoming">Scheduled</div>
  <div class="exam-info">
    <h4>${e[1]}</h4>
    <p class="exam-id">Exam ID: ${e[0]}</p>
    <p class="exam-time"><i class="fa-solid fa-clock"></i>Starts: ${s.toLocaleString()}</p>
    ${metaBox(a,b,t)}
  </div>
</div>`;

function completedCard(e, msg, a, b, t) {
  return `
  <div class="exam-card">
    <div class="status-badge status-completed">Completed</div>
    <div class="exam-info">
      <h4>${e[1]}</h4>
      <p class="exam-id">${msg}</p>
      ${metaBox(a,b,t)}
      ${e[7]==="YES"
        ? `<button class="btn btn-review" onclick="viewResult('${e[0]}')"><i class="fa-solid fa-chart-bar"></i><span>View Result</span></button>
           <button class="btn btn-review" onclick="reviewExam('${e[0]}')"><i class="fa-solid fa-file-lines"></i><span>Review Answers</span></button>`
        : `<div class="empty"><i class="fa-solid fa-lock"></i><p>Review not enabled for this examination</p></div>`
      }
    </div>
  </div>`;
}

/* ===== NAVIGATION ===== */
function startExam(id)  { sessionStorage.setItem("exam_id", id); location.href = "instructions.html"; }
function viewResult(id) { sessionStorage.setItem("exam_id", id); location.href = "result.html"; }
function reviewExam(id) { sessionStorage.setItem("exam_id", id); location.href = "review.html"; }
function logout()       { sessionStorage.clear(); location.href = "index.html"; }
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Dashboard - KCET ECE</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --primary: #1a237e;
  --primary-light: #3949ab;
  --primary-dark: #0d1642;
  --accent: #00bfa5;
  --accent-dark: #00897b;
  --success: #00c853;
  --warning: #ffa000;
  --danger: #d32f2f;
  --text-dark: #1a1a2e;
  --text-medium: #4a5568;
  --text-light: #718096;
  --bg-main: #f7fafc;
  --bg-card: #ffffff;
  --border: #e2e8f0;
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.12);
  --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.16);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg-main);
  color: var(--text-dark);
  line-height: 1.6;
  overflow-x: hidden;
}

/* ========== ANIMATED BACKGROUND ========== */
.bg-decoration {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  pointer-events: none;
  overflow: hidden;
}

.bg-decoration::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -20%;
  width: 800px;
  height: 800px;
  background: radial-gradient(circle, rgba(26, 35, 126, 0.08) 0%, transparent 70%);
  border-radius: 50%;
  animation: float 20s ease-in-out infinite;
}

.bg-decoration::after {
  content: '';
  position: absolute;
  bottom: -30%;
  left: -10%;
  width: 600px;
  height: 600px;
  background: radial-gradient(circle, rgba(0, 191, 165, 0.06) 0%, transparent 70%);
  border-radius: 50%;
  animation: float 25s ease-in-out infinite reverse;
}

@keyframes float {
  0%, 100% { transform: translate(0, 0) rotate(0deg); }
  33% { transform: translate(30px, -30px) rotate(120deg); }
  66% { transform: translate(-20px, 20px) rotate(240deg); }
}

/* ========== HEADER ========== */
header {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
  color: #fff;
  padding: 0;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: var(--shadow-lg);
  backdrop-filter: blur(10px);
  animation: slideDown 0.6s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.header-content {
  max-width: 1400px;
  margin: 0 auto;
  padding: 24px 32px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 16px;
}

.header-icon {
  width: 56px;
  height: 56px;
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
  animation: iconBounce 2s ease-in-out infinite;
}

@keyframes iconBounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

.header-title {
  display: flex;
  flex-direction: column;
}

.header-title h1 {
  font-family: 'Playfair Display', serif;
  font-size: 28px;
  font-weight: 700;
  margin: 0;
  letter-spacing: -0.5px;
}

.header-title p {
  font-size: 14px;
  opacity: 0.9;
  margin: 0;
  font-weight: 500;
}

.header-time {
  font-size: 14px;
  opacity: 0.9;
  text-align: right;
  font-weight: 500;
}

/* ========== CONTAINER ========== */
.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 40px 32px;
  position: relative;
  z-index: 1;
}

/* ========== PROFILE CARD ========== */
.profile {
  background: linear-gradient(135deg, #ffffff 0%, #f8fafb 100%);
  border-radius: 24px;
  padding: 36px;
  display: flex;
  align-items: center;
  gap: 28px;
  box-shadow: var(--shadow-xl);
  margin-bottom: 48px;
  border: 1px solid rgba(255, 255, 255, 0.8);
  position: relative;
  overflow: hidden;
  animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.2s backwards;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(40px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.profile::before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, rgba(0, 191, 165, 0.1) 0%, transparent 70%);
  border-radius: 50%;
  animation: pulse 4s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 0.5; }
  50% { transform: scale(1.1); opacity: 0.3; }
}

.profile-avatar {
  width: 100px;
  height: 100px;
  background: linear-gradient(135deg, var(--primary), var(--primary-light));
  border-radius: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  color: #fff;
  box-shadow: var(--shadow-lg);
  flex-shrink: 0;
  position: relative;
  z-index: 1;
  animation: avatarPop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.4s backwards;
}

@keyframes avatarPop {
  0% {
    transform: scale(0) rotate(-180deg);
    opacity: 0;
  }
  100% {
    transform: scale(1) rotate(0);
    opacity: 1;
  }
}

.profile-info {
  flex: 1;
  position: relative;
  z-index: 1;
}

.profile-info h2 {
  font-family: 'Playfair Display', serif;
  font-size: 32px;
  font-weight: 700;
  color: var(--primary);
  margin: 0 0 8px 0;
  letter-spacing: -0.5px;
}

.profile-details {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin-top: 12px;
}

.profile-detail {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 15px;
  color: var(--text-medium);
  font-weight: 500;
}

.profile-detail i {
  color: var(--accent);
  font-size: 16px;
}

/* ========== SECTION ========== */
.section {
  margin-bottom: 56px;
  animation: fadeIn 0.8s ease backwards;
}

.section:nth-child(2) { animation-delay: 0.3s; }
.section:nth-child(3) { animation-delay: 0.4s; }
.section:nth-child(4) { animation-delay: 0.5s; }

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.section-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 28px;
  position: relative;
  padding-left: 24px;
}

.section-header::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 6px;
  height: 40px;
  background: linear-gradient(180deg, var(--accent), var(--accent-dark));
  border-radius: 3px;
  animation: heightExpand 0.6s ease;
}

@keyframes heightExpand {
  from { height: 0; }
  to { height: 40px; }
}

.section-header i {
  font-size: 28px;
  color: var(--accent);
  animation: iconSpin 0.6s ease;
}

@keyframes iconSpin {
  from { transform: rotate(-180deg) scale(0); }
  to { transform: rotate(0) scale(1); }
}

.section-header h3 {
  font-family: 'Playfair Display', serif;
  font-size: 26px;
  font-weight: 700;
  color: var(--primary);
  margin: 0;
  letter-spacing: -0.5px;
}

/* ========== EXAM GRID ========== */
.exam-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
  gap: 28px;
}

/* ========== EXAM CARD ========== */
.exam-card {
  background: var(--bg-card);
  border-radius: 20px;
  padding: 32px 28px;
  box-shadow: var(--shadow-md);
  position: relative;
  border: 1px solid var(--border);
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  animation: cardSlideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) backwards;
  overflow: hidden;
}

.exam-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 4px;
  background: linear-gradient(90deg, var(--accent), var(--primary-light));
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.4s ease;
}

.exam-card:hover::before {
  transform: scaleX(1);
}

.exam-card:nth-child(1) { animation-delay: 0.1s; }
.exam-card:nth-child(2) { animation-delay: 0.2s; }
.exam-card:nth-child(3) { animation-delay: 0.3s; }
.exam-card:nth-child(4) { animation-delay: 0.4s; }

@keyframes cardSlideIn {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.exam-card:hover {
  transform: translateY(-8px);
  box-shadow: var(--shadow-xl);
  border-color: var(--accent);
}

/* ========== STATUS BADGE ========== */
.status-badge {
  position: absolute;
  top: 20px;
  right: 20px;
  padding: 8px 16px;
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.5px;
  color: #fff;
  border-radius: 20px;
  text-transform: uppercase;
  box-shadow: var(--shadow-sm);
  animation: badgePop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s backwards;
}

@keyframes badgePop {
  from {
    transform: scale(0);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.status-live {
  background: linear-gradient(135deg, #00c853, #00897b);
  animation: badgePulse 2s ease-in-out infinite;
}

@keyframes badgePulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(0, 200, 83, 0.7); }
  50% { box-shadow: 0 0 0 8px rgba(0, 200, 83, 0); }
}

.status-upcoming {
  background: linear-gradient(135deg, #ffa000, #f57c00);
}

.status-completed {
  background: linear-gradient(135deg, #546e7a, #455a64);
}

/* ========== EXAM INFO ========== */
.exam-info {
  position: relative;
  z-index: 1;
}

.exam-info h4 {
  font-family: 'Playfair Display', serif;
  font-size: 22px;
  font-weight: 700;
  color: var(--primary);
  margin: 0 0 12px 0;
  line-height: 1.3;
  letter-spacing: -0.3px;
}

.exam-id {
  font-size: 13px;
  color: var(--text-light);
  font-weight: 600;
  margin-bottom: 8px;
  letter-spacing: 0.3px;
}

.exam-time {
  font-size: 14px;
  color: var(--text-medium);
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.exam-time i {
  color: var(--accent);
}

/* ========== META BOX ========== */
.meta-box {
  background: linear-gradient(135deg, rgba(0, 191, 165, 0.08), rgba(26, 35, 126, 0.08));
  border-radius: 16px;
  padding: 20px;
  margin: 20px 0;
  border: 1px solid rgba(0, 191, 165, 0.2);
  position: relative;
  overflow: hidden;
}

.meta-box::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  height: 100%;
  background: linear-gradient(180deg, var(--accent), var(--primary-light));
}

.meta-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin: 10px 0;
  font-size: 14px;
  color: var(--text-medium);
  font-weight: 600;
}

.meta-row i {
  margin-right: 8px;
  color: var(--accent);
}

.meta-total {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 2px dashed rgba(0, 191, 165, 0.3);
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 18px;
  font-weight: 800;
  color: var(--success);
}

.meta-total i {
  font-size: 20px;
  animation: starRotate 3s linear infinite;
}

@keyframes starRotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* ========== BUTTONS ========== */
.btn {
  width: 100%;
  padding: 16px 24px;
  border: none;
  border-radius: 14px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin-top: 16px;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
  overflow: hidden;
  box-shadow: var(--shadow-md);
}

.btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}

.btn:hover::before {
  width: 300px;
  height: 300px;
}

.btn i {
  font-size: 18px;
  position: relative;
  z-index: 1;
}

.btn span {
  position: relative;
  z-index: 1;
}

.btn-start {
  background: linear-gradient(135deg, var(--success), #00897b);
}

.btn-start:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px rgba(0, 200, 83, 0.4);
}

.btn-review {
  background: linear-gradient(135deg, var(--primary), var(--primary-light));
}

.btn-review:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px rgba(26, 35, 126, 0.4);
}

.btn-logout {
  background: linear-gradient(135deg, var(--danger), #c62828);
  margin-top: 40px;
  max-width: 300px;
  margin-left: auto;
  margin-right: auto;
}

.btn-logout:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px rgba(211, 47, 47, 0.4);
}

/* ========== EMPTY STATE ========== */
.empty {
  background: var(--bg-card);
  padding: 48px 32px;
  border-radius: 20px;
  text-align: center;
  color: var(--text-light);
  box-shadow: var(--shadow-sm);
  border: 2px dashed var(--border);
  animation: emptyFade 0.6s ease;
}

@keyframes emptyFade {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.empty i {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
  display: block;
}

.empty p {
  font-size: 16px;
  font-weight: 500;
  margin: 0;
}

/* ========== FOOTER ========== */
.footer {
  text-align: center;
  padding: 32px 20px;
  font-size: 14px;
  color: var(--text-light);
  margin-top: 56px;
  border-top: 1px solid var(--border);
  animation: fadeIn 0.8s ease 0.8s backwards;
}

.footer p {
  margin: 0;
  font-weight: 500;
}

/* ========== LOADING STATE ========== */
.loading-spinner {
  display: inline-block;
  width: 40px;
  height: 40px;
  border: 4px solid rgba(0, 191, 165, 0.2);
  border-top: 4px solid var(--accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 20px auto;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ========== RESPONSIVE ========== */
@media (max-width: 768px) {
  .container {
    padding: 24px 20px;
  }

  .header-content {
    padding: 20px 20px;
    flex-direction: column;
    text-align: center;
  }

  .header-left {
    flex-direction: column;
  }

  .header-title h1 {
    font-size: 24px;
  }

  .profile {
    flex-direction: column;
    text-align: center;
    padding: 28px 24px;
  }

  .profile-info h2 {
    font-size: 26px;
  }

  .profile-details {
    justify-content: center;
  }

  .exam-grid {
    grid-template-columns: 1fr;
    gap: 20px;
  }

  .section-header h3 {
    font-size: 22px;
  }

  .section {
    margin-bottom: 40px;
  }
}

@media (max-width: 480px) {
  .exam-card {
    padding: 24px 20px;
  }

  .exam-info h4 {
    font-size: 20px;
  }

  .meta-box {
    padding: 16px;
  }

  .btn {
    padding: 14px 20px;
    font-size: 15px;
  }
}
</style>
</head>

<body>

<!-- Background Decoration -->
<div class="bg-decoration"></div>

<!-- Header -->
<header>
  <div class="header-content">
    <div class="header-left">
      <div class="header-icon">
        <i class="fa-solid fa-user-graduate"></i>
      </div>
      <div class="header-title">
        <h1>Student Portal</h1>
        <p>KCET - Department of ECE</p>
      </div>
    </div>
    <div class="header-time" id="currentTime"></div>
  </div>
</header>

<div class="container">

  <!-- Profile Card -->
  <div class="profile" id="profile"></div>

  <!-- Live Exams Section -->
  <div class="section">
    <div class="section-header">
      <i class="fa-solid fa-bolt"></i>
      <h3>Live Examinations</h3>
    </div>
    <div id="live" class="exam-grid">
      <div class="empty">
        <i class="fa-solid fa-spinner fa-spin"></i>
        <p>Loading examinations...</p>
      </div>
    </div>
  </div>

  <!-- Scheduled Exams Section -->
  <div class="section">
    <div class="section-header">
      <i class="fa-solid fa-calendar-days"></i>
      <h3>Scheduled Examinations</h3>
    </div>
    <div id="upcoming" class="exam-grid">
      <div class="empty">
        <i class="fa-solid fa-spinner fa-spin"></i>
        <p>Loading examinations...</p>
      </div>
    </div>
  </div>

  <!-- Completed Exams Section -->
  <div class="section">
    <div class="section-header">
      <i class="fa-solid fa-circle-check"></i>
      <h3>Completed Examinations</h3>
    </div>
    <div id="completed" class="exam-grid">
      <div class="empty">
        <i class="fa-solid fa-spinner fa-spin"></i>
        <p>Loading examinations...</p>
      </div>
    </div>
  </div>

  <!-- Logout Button -->
  <button class="btn btn-logout" onclick="logout()">
    <i class="fa-solid fa-right-from-bracket"></i>
    <span>Logout</span>
  </button>

  <!-- Footer -->
  <div class="footer">
    <p>© 2024 KCET - Department of Electronics and Communication Engineering</p>
  </div>
</div>

<script>
const WEBAPP_URL =
"https://script.google.com/macros/s/AKfycbzQAZuTBNRUdr86h0xC3C_KSj5M7-AC4ObFlMeGov_j9na-iOnmaCFMJqrauw1ad0Ra/exec";

/* ===== LIVE CLOCK ===== */
function updateTime() {
  const now = new Date();
  const options = { 
    weekday: 'long', 
    year: 'numeric', 
    month: 'long', 
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  };
  document.getElementById('currentTime').textContent = now.toLocaleDateString('en-US', options);
}
updateTime();
setInterval(updateTime, 60000);

/* ===== SESSION CHECK (MANDATORY) ===== */
const userRaw = sessionStorage.getItem("user");
if(!userRaw){
 alert("Session expired. Please login again.");
 location.href="index.html";
}
const user = JSON.parse(userRaw);

/* ===== PROFILE ===== */
profile.innerHTML = `
<div class="profile-avatar">
  <i class="fa-solid fa-user-graduate"></i>
</div>
<div class="profile-info">
  <h2>${user.name}</h2>
  <div class="profile-details">
    <div class="profile-detail">
      <i class="fa-solid fa-id-card"></i>
      <span>${user.roll}</span>
    </div>
    <div class="profile-detail">
      <i class="fa-solid fa-building-columns"></i>
      <span>${user.dept}</span>
    </div>
    <div class="profile-detail">
      <i class="fa-solid fa-graduation-cap"></i>
      <span>${user.year} - ${user.section}</span>
    </div>
  </div>
</div>`;

/* ===== FETCH DATA (SINGLE PATH – STABLE) ===== */
Promise.all([
 fetch(WEBAPP_URL,{
  method:"POST",
  body:new URLSearchParams({action:"getStudentExams",roll:user.roll})
 }).then(r=>r.json()),
 fetch(WEBAPP_URL,{
  method:"POST",
  body:new URLSearchParams({action:"getResults"})
 }).then(r=>r.json())
])
.then(([exams,results])=>{

 live.innerHTML=""; 
 upcoming.innerHTML=""; 
 completed.innerHTML="";

 exams.forEach(e=>{
  const a=+e[2], b=+e[3], t=a+b*2;
  const attempts = results.filter(r=>r[0]===e[0] && r[1]===user.roll);
  const last = attempts.length ? attempts[attempts.length-1][4] : null;
  const now=new Date(), start=new Date(e[8]), end=new Date(e[9]);

  if(last==="SUBMITTED"){
   completed.innerHTML+=completedCard(e,"COMPLETED",a,b,t); return;
  }
  if(last==="RE-ENABLED"){
   live.innerHTML+=liveCard(e,a,b,t); return;
  }
  if(!attempts.length && now>=start && now<=end){
   live.innerHTML+=liveCard(e,a,b,t); return;
  }
  if(now<start){
   upcoming.innerHTML+=upcomingCard(e,start,a,b,t); return;
  }
  completed.innerHTML+=completedCard(e,"CLOSED",a,b,t);
 });

 if(!live.innerHTML) live.innerHTML='<div class="empty"><i class="fa-solid fa-calendar-xmark"></i><p>No live examinations at the moment</p></div>';
 if(!upcoming.innerHTML) upcoming.innerHTML='<div class="empty"><i class="fa-solid fa-clock"></i><p>No scheduled examinations</p></div>';
 if(!completed.innerHTML) completed.innerHTML='<div class="empty"><i class="fa-solid fa-inbox"></i><p>No completed examinations</p></div>';

})
.catch(()=>{
 live.innerHTML =
 upcoming.innerHTML =
 completed.innerHTML =
 '<div class="empty"><i class="fa-solid fa-exclamation-triangle"></i><p>Unable to load examinations. Please refresh the page.</p></div>';
});

/* ===== CARD BUILDERS ===== */
const metaBox=(a,b,t)=>`
<div class="meta-box">
  <div class="meta-row">
    <span><i class="fa-solid fa-list-check"></i> Part A (1 Mark)</span>
    <strong>${a} Questions</strong>
  </div>
  <div class="meta-row">
    <span><i class="fa-solid fa-layer-group"></i> Part B (2 Marks)</span>
    <strong>${b} Questions</strong>
  </div>
  <div class="meta-total">
    <span><i class="fa-solid fa-star"></i> Total Marks</span>
    <strong>${t}</strong>
  </div>
</div>`;

const liveCard=(e,a,b,t)=>`
<div class="exam-card">
  <div class="status-badge status-live">● Live</div>
  <div class="exam-info">
    <h4>${e[1]}</h4>
    <p class="exam-id">Exam ID: ${e[0]}</p>
    ${metaBox(a,b,t)}
    <button class="btn btn-start" onclick="startExam('${e[0]}')">
      <i class="fa-solid fa-play"></i>
      <span>Start Examination</span>
    </button>
  </div>
</div>`;

const upcomingCard=(e,s,a,b,t)=>`
<div class="exam-card">
  <div class="status-badge status-upcoming">Scheduled</div>
  <div class="exam-info">
    <h4>${e[1]}</h4>
    <p class="exam-id">Exam ID: ${e[0]}</p>
    <p class="exam-time"><i class="fa-solid fa-clock"></i> Starts: ${s.toLocaleString()}</p>
    ${metaBox(a,b,t)}
  </div>
</div>`;

function completedCard(e,msg,a,b,t){
 return `
 <div class="exam-card">
  <div class="status-badge status-completed">Completed</div>
  <div class="exam-info">
   <h4>${e[1]}</h4>
   <p class="exam-id">${msg}</p>
   ${metaBox(a,b,t)}
   ${
     e[7]==="YES"
     ? `
       <button class="btn btn-review" onclick="viewResult('${e[0]}')">
         <i class="fa-solid fa-chart-bar"></i>
         <span>View Result</span>
       </button>
       <button class="btn btn-review" onclick="reviewExam('${e[0]}')">
         <i class="fa-solid fa-file-lines"></i>
         <span>Review Answers</span>
       </button>
     `
     : `<div class="empty"><i class="fa-solid fa-lock"></i><p>Review not enabled for this examination</p></div>`
   }
  </div>
 </div>`;
}

/* ===== NAVIGATION ===== */
function startExam(id){sessionStorage.setItem("exam_id",id);location.href="instructions.html";}
function viewResult(id){sessionStorage.setItem("exam_id",id);location.href="result.html";}
function reviewExam(id){sessionStorage.setItem("exam_id",id);location.href="review.html";}
function logout(){sessionStorage.clear();location.href="index.html";}
</script>

</body>
</html>